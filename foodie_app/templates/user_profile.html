<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{user.first_name}} {{user.last_name}}</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>

<body id="body">
    <header id="header" class="bg-white d-flex p-3 align-items-center shadow-sm mt-0">
        <h2 class="pr-5 mb-0"><a href="/home" class="home">Foodie Favs</a></h2>
        <a href="/home/new_recipe" class="ml-auto btn-outline-secondary btn-lg p-1 pl-2 pr-2 rounded shadow-sm"
            data-toggle="tooltip" data-placement="bottom" title="New Recipe"><i class="fas fa-plus"></i></a></i>
        <a href="/home/{{user.id}}/settings" class="ml-2 btn-outline-secondary btn-lg p-1 pl-2 pr-2 rounded shadow-sm"
            data-toggle="tooltip" data-placement="bottom" title="Profile Settings"><i class="fas fa-cog"></i></a>
        <a href="/home/log_off" class="ml-2 btn-outline-secondary btn-lg p-1 pl-2 pr-2 rounded shadow-sm" data-toggle="tooltip"
            data-placement="bottom" title="Log Out"><i class="fas fa-sign-out-alt"></i></a>
    </header>
    <button id="topBtn" title="Go to top" class="btn rounded shadow">Top</button>
    <div class="pt-5"></div>
    <div class="d-flex mt-5 pt-5">
        <div class="w-50">
            <div class="d-flex flex-column">
                <h2 class="heading">This Week</h2>
            </div>
            <div class="menu w-100 m-3 d-flex flex-column p-1 rounded shadow-sm">
                <div class="day-row d-flex justify-content-around p-1">
                    <div class="day rounded shadow-sm d-flex flex-column">
                        <p class="font-weight-bold pt-2 h5 mt-2">Sunday</p>
                        <p class="w-75 ml-auto mr-auto mt-auto mb-auto">{{menu.sunday.name}}</p>
                        <a href="/home/recipe_{{menu.sunday.id}}" class="btn view-recipe ml-auto mr-auto mt-auto mb-2">View</a>
                    </div>
                    <div class="day rounded shadow-sm d-flex flex-column">
                        <p class="font-weight-bold pt-2 h5 mt-2">Monday</p>
                        <p class="w-75 ml-auto mr-auto mt-auto mb-auto">{{menu.monday.name}}</p>
                        <a href="/home/recipe_{{menu.monday.id}}" class="btn view-recipe ml-auto mr-auto mt-auto mb-2">View</a>
                    </div>
                    <div class="day rounded shadow-sm d-flex flex-column">
                        <p class="font-weight-bold pt-2 h5 mt-2">Tuesday</p>
                        <p class="w-75 ml-auto mr-auto mt-auto mb-auto">{{menu.monday.name}}</p>
                        <a href="/home/recipe_{{menu.monday.id}}" class="btn view-recipe ml-auto mr-auto mt-auto mb-2">View</a>
                    </div>
                </div>

                <div class="day-row d-flex justify-content-around p-1">
                    <div class="day rounded shadow-sm d-flex flex-column">
                        <p class="font-weight-bold pt-2 h5 mt-2">Wednesday</p>
                        <p class="w-75 ml-auto mr-auto mt-auto mb-auto">{{menu.wednesday.name}}</p>
                        <a href="/home/recipe_{{menu.wednesday.id}}" class="btn view-recipe ml-auto mr-auto mt-auto mb-2">View</a>
                    </div>
                    <div class="day rounded shadow-sm d-flex flex-column">
                        <p class="font-weight-bold pt-2 h5 mt-2">Thursday</p>
                        <p class="w-75 ml-auto mr-auto mt-auto mb-auto">{{menu.thursday.name}}</p>
                        <a href="/home/recipe_{{menu.thursday.id}}" class="btn view-recipe ml-auto mr-auto mt-auto mb-2">View</a>
                    </div>
                    <div class="day rounded shadow-sm d-flex flex-column">
                        <p class="font-weight-bold pt-2 h5 mt-2">Friday</p>
                        <p class="w-75 ml-auto mr-auto mt-auto mb-auto">{{menu.friday.name}}</p>
                        <a href="/home/recipe_{{menu.friday.id}}" class="btn view-recipe ml-auto mr-auto mt-auto mb-2">View</a>
                    </div>
                </div>
                <div class="day-row d-flex justify-content-end p-1">
                    <div class="day rounded shadow-sm d-flex flex-column">
                        <p class="font-weight-bold pt-2 h5 mt-2">Saturday</p>
                        <p class="w-75 ml-auto mr-auto mt-auto mb-auto">{{menu.saturday.name}}</p>
                        <a href="/home/recipe_{{menu.saturday.id}}" class="btn view-recipe ml-auto mr-auto mt-auto mb-2">View</a>
                    </div>
                    {%if menu.editor.id == user.id %}
                    <div class="edit d-flex flex-column">
                        <a class="btn btn-lg mt-auto ml-auto mr-1" href="/home/edit_menu{{menu.id}}"><i class="far fa-edit"></i></a>
                    </div>
                    {% else %}
                    <a class="btn view-recipe" href="/home/menu">create Menu</a>
                    {% endif %}
                    
                </div>
            </div>
        </div>
        <div class="w-25 d-flex flex-column align-items-center">
            <h2 class="heading ">Favorite Recipes</h2>
            {% for recipe in user.favorite_recipes.all %}
            <div class="recipe-card rounded shadow-sm w-75 p-3 m-2">
                <p class="text-center h5"><a id="recipe-text" href="/home/recipe_{{recipe.id}}">{{recipe.name}}</a></p>
                <p>{{recipe.desc}}</p>
                {% for favorite_user in recipe.users_who_favorite.all %}
                <form action="/home/{{user.id}}/remove_favorite_profile" method="POST">
                    {% csrf_token %}
                    <input type="hidden" name="recipe_id" value="{{ recipe.id }}">
                    <input type="hidden" name="user_id" value="{{ user.id }}">
                    <input class="btn favorite ml-2 pt-1 pb-1" type="submit" name="add_fav" value="Remove">
                </form>
                {% endfor %}
            </div>
            {% endfor %}
        </div>
        <div class="w-25">
            <h2 class="heading">Shopping List</h2>
            <div class="shopping-box mr-3 rounded shadow-sm">
                <div class="m-1 p-2 rounded" id="shopping-list">
                    <input type="hidden" value="/home/{{user.id}}/add_item" id="userId">
                    {% if messages %}
                    <ul class="messages mt-2">
                        {% for message in messages %}
                        <li {% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                    <ul>
                        {% for item in shopping_list %}
                        {% if item.user.id == user.id %}
                        <div class="d-flex alin-items-start mb-2">
                            <li class="pt-2">{{item.item}}</li>
                            <form action="/home/{{user.id}}/delete_item" method="POST">
                                {% csrf_token %}
                                <input type="hidden" name="item_id" value="{{ item.id }}">
                                <input class="btn fa-input" type="submit" name="delete" value="&#xf1f8" id="submitItem">
                            </form>
                        </div>
                        {% endif %}
                        {% endfor %}
                    </ul>
                </div>
                <button class="btn rounded btn-sm m-3 add-item" id="addItem">Add Item</button>
            </div>
        </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"
        integrity="sha384-LtrjvnR4Twt/qOuYxE721u19sVFLVSA4hf/rRt6PrZTmiPltdZcI7q7PXQBYTKyf"
        crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/181ad7b227.js" crossorigin="anonymous"></script>
    <script src="{% static 'js/app.js' %}"></script>
</body>


</html>